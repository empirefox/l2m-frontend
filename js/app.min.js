!function(e,t){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.pluralize=t()}(this,function(){var e=[],t=[],r={},a={},n={},o=function(e){return e.toLowerCase()},s=function(e){return e.toUpperCase()},i=function(e){return s(e[0])+o(e.substr(1))},c=function(e){return String(e).trim()},l=function(e){return o(c(e))},u=function(e){return"string"==typeof e?new RegExp("^"+e+"$"):e},d=function(e){return e===e.toUpperCase()?s:e[0]===e[0].toUpperCase()?i:o},m=function(e,t){if(!e.length||r[e])return e;for(var a=t.length;a--;){var n=t[a];if(n[0].test(e))return e.replace(n[0],n[1])}return e},p=function(e,t,r){return function(a){a=c(a);var n=o(a),s=d(a);return s(t[n]?n:e[n]?e[n]:m(n,r))}},f=function(e,t,r){var a=1===t?h(e):g(e);return(r?t+" ":"")+a},g=f.plural=p(n,a,e),h=f.singular=p(a,n,t);return f.addPluralRule=function(t,r){e.push([u(t),r])},f.addSingularRule=function(e,r){t.push([u(e),r])},f.addUncountableRule=function(e){return"string"==typeof e?r[l(e)]=!0:(f.addPluralRule(e,"$&"),void f.addSingularRule(e,"$&"))},f.addIrregularRule=function(e,t){t=l(t),e=l(e),n[e]=t,a[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["this","these"],["that","those"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["beau","beaus"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["thief","thieves"],["genie","genies"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(e){return f.addIrregularRule(e[0],e[1])}),[[/s?$/,"s"],[/([^aeiou]ese)$/,"$1"],[/^(ax|test)is$/,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/,"$1es"],[/(e[mn]u)s?$/,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc)(?:us|i)$/,"$1i"],[/^(alumn|alg|vertebr)(?:a|ae)$/,"$1ae"],[/(her|at|gr)o$/,"$1oes"],[/^(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/,"$1a"],[/^(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|\w+hedr)(?:a|on)$/,"$1a"],[/sis$/,"ses"],[/(?:(i)fe|(ar|l|[eo][ao])f)$/,"$1$2ves"],[/([^aeiouy]|qu)y$/,"$1ies"],[/([^ch][ieo][ln])ey$/,"$1ies"],[/(x|ch|ss|sh|zz)$/,"$1es"],[/(matr|cod|mur|sil|vert|ind)(?:ix|ex)$/,"$1ices"],[/^(m|l)(?:ice|ouse)$/,"$1ice"],[/(pe)(?:rson|ople)$/,"$1ople"],[/(child)(?:ren)?$/,"$1ren"],[/(eau)x?$/,"$1x"],[/m[ae]n$/,"men"]].forEach(function(e){return f.addPluralRule(e[0],e[1])}),[[/s$/,""],[/(ss)$/,"$1"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(?:sis|ses)$/,"$1sis"],[/(^analy)(?:sis|ses)$/,"$1sis"],[/([^aeflor])ves$/,"$1fe"],[/(hive|tive|dr?ive)s$/,"$1"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/,"$1f"],[/([^aeiouy]|qu)ies$/,"$1y"],[/(^[pl]|zomb|^(?:neck)?t|[aeo][lt]|cut)ies$/,"$1ie"],[/([^c][eor]n|smil)ies$/,"$1ey"],[/^(m|l)ice$/,"$1ouse"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/,"$1"],[/(e[mn]u)s?$/,"$1"],[/(movie|twelve)s$/,"$1"],[/(cris|test|diagnos)(?:is|es)$/,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc)(?:us|i)$/,"$1us"],[/^(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)a$/,"$1um"],[/^(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|\w+hedr)a$/,"$1on"],[/^(alumn|alg|vertebr)ae$/,"$1a"],[/(cod|mur|sil|vert|ind)ices$/,"$1ex"],[/(matr)ices$/,"$1ix"],[/(pe)(rson|ople)$/,"$1rson"],[/(child)ren$/,"$1"],[/(eau)[sx]?$/,"$1"],[/men$/,"man"]].forEach(function(e){return f.addSingularRule(e[0],e[1])}),["advice","agenda","bison","bream","buffalo","carp","chassis","cod","cooperation","corps","digestion","debris","diabetes","energy","equipment","elk","excretion","expertise","flounder","gallows","graffiti","headquarters","health","herpes","highjinks","homework","information","jeans","justice","kudos","labour","machinery","mackerel","media","mews","moose","news","pike","plankton","pliers","pollution","premises","rain","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","trout","tuna","whiting","wildebeest","wildlife",/pox$/,/ois$/,/deer$/,/fish$/,/sheep$/,/measles$/,/[^aeiou]ese$/].forEach(f.addUncountableRule),f});var DEBUG;"undefined"==typeof DEBUG&&(DEBUG=!0),$(document).on("mouseenter",".result",function(){var e,t,r=document,a=$(this);a.length&&(a=a[0],r.body.createTextRange?(e=r.body.createTextRange(),e.moveToElementText(a),e.select()):window.getSelection&&(t=window.getSelection(),e=r.createRange(),e.selectNodeContents(a),t.removeAllRanges(),t.addRange(e)))}),Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},Array.prototype.replace=function(e,t){var r=this.indexOf(e);r>-1&&(this[r]=t)};var angularApp=angular.module("myApp",["angularBsEditor","ui.bootstrap","ngRoute"]);angularApp.constant("editorCssPath",["//cdn.staticfile.org/twitter-bootstrap/3.2.0/css/bootstrap.min.css","//cdn.staticfile.org/font-awesome/4.1.0/css/font-awesome.min.css"]).constant("navs",[{display:"从这里开始",when:"/",templateUrl:"views/main.html",controller:"MainCtrl"},{display:"Bucket",when:"/buckets",templateUrl:"views/form-container.html",controller:"BucketsCtrl"},{display:"测试编辑器",when:"/kindeditors",templateUrl:"views/test-with-editor.html",controller:"KindeditorsCtrl"},{display:"多行文本转变量",when:"/strings",templateUrl:"views/multitext.html",controller:"MultiTextCtrl"},{display:"Fa列表",when:"/fas",templateUrl:"views/fa-list.html",controller:"FaListCtrl"}]).config(["$routeProvider","navs",function(e,t){angular.forEach(t,function(t){e.when(t.when,t)}),e.when("/table/:fname",{templateUrl:"views/form-container.html",controller:"TablesCtrl"}),e.otherwise({redirectTo:"/"})}]).factory("FormsIniter",["$http",function(e){return{load:function(){var t=[];return e.get("/forms").success(function(e){e.error||(t=e.content)}),t}}}]).run(["$rootScope","FormsIniter",function(e,t){e.tables=t.load()}]),angularApp.controller("BucketsCtrl",["$scope","FormService",function(e,t){e.ops={load:"/Bucket/page",save:"/Bucket/save",remove:"/Bucket/remove",recovery:"/Bucket/recovery",migrate:"/Bucket/migrate",form:"/Bucket/form"},t.get(e.ops.form).then(function(t){e.form=t})}]),angularApp.controller("FaListCtrl",["$scope","$http",function(e,t){var r={url:"http://cdn.staticfile.org/font-awesome/4.1.0/css/font-awesome.css"};t.get(r.url).success(function(t){var r=t.match(/.fa-.*:before/gi);angular.forEach(r,function(e,t){r[t]=e.substring(".fa-".length,e.length-":before".length)}),e.fas=r})}]),angularApp.controller("GooglesCtrl",["$scope","FormService",function(e,t){e.ops={load:"/google/page",save:"/google/save",remove:"/google/remove",recovery:"/google/recovery",migrate:"/google/migrate",form:"/google/form"},t.get(e.ops.form).then(function(t){e.form=t})}]),angularApp.controller("HeaderCtrl",["$scope","HeaderService","navs",function(e,t,r){e.active=t.active,e.navs=r}]),angularApp.controller("KindeditorsCtrl",["$scope","$http","editorCssPath",function(e,t,r){e.show=function(e){var t="#"+e;KindEditor.remove(t);var a=KindEditor.create(t,{angular:angularApp,bucket:e,cssPath:r});a.html("测试内容 "+e)},t.get("/bucket/names").success(function(t){e.buckets=t.content,e.alert={type:"success",msg:"载入完毕"}})}]),angularApp.controller("MainCtrl",["$scope",function(e){e.author="savage"}]),angularApp.controller("MultiTextCtrl",["$scope",function(e){e.arg="a",e.compute=function(){var t=e.arg+"+='",r="';\n",a=r+t,n=e.code.replace(/'/g,"\\'");e.out="var "+e.arg+"='"+n.replace(/[\n\r]+/g,a)+r}}]),angularApp.controller("TablesCtrl",["$scope","$routeParams","FormService",function(e,t,r){var a=t.fname,n=function(e){return"/"+a+"/"+e};e.ops={load:n("page"),save:n("save"),remove:n("remove"),recovery:n("recovery"),migrate:n("migrate")},r.get(n("form")).then(function(t){e.form=t})}]),angularApp.directive("fieldDirective",["$http","$compile","editorCssPath","ParentsSession",function(e,t,r,a,n){var o={search:"关键字",url:"如：http://www.luck2.me",telephone:"如：18688888888",email:"Email",password:"输入密码"},s="views/directive-templates/field/",i=function(e){var t="";switch(e){case"textarea":case"checkbox":case"date":case"dropdown":case"hidden":case"radio":case"kindeditor":case"children":t=s+e+".html";break;case"text":case"textfield":case"search":case"url":case"telephone":case"email":case"password":case"dateTimeLocal":case"month":case"number":case"time":case"week":t=s+"textfield.html";break;default:t=s+"textfield.html",console.log(e)}return t},c=function(e){return e.data[e.field.Name]||""},l=function(e){delete e.data[e.field.Name]},u={kindeditor:function(e,t){var r=c(e),n={width:"100%",angular:angularApp,allowImageUpload:!0,allowFileManager:!0,cssPath:a,afterChange:function(){var t=this;t.sync();var r=function(){var r=t.html();""===r?l(e):e.data[e.field.Name]=r};angular.isDefined(e.data)&&(e.$$phase||e.$root.$$phase?r():e.$apply(r))},afterCreate:function(){this.html(r)}},o=KindEditor.create(t.find("textarea")[0],angular.extend(n,JSON.parse(e.field.Ops)));e.$watch("data",function(){angular.isDefined(e.data)&&o.html(c(e))})},children:function(e){e.view=function(t){var a=pluralize.plural(t,1);n[a]=e.data,r.path("/"+t.toLowerCase())}}},d=function(r,a){var n=r.field.Name,s=r.field.Type;r.field.Title||(r.field.Title=n),s||(s="text"),angular.isDefined(o[s])&&angular.isUndefined(r.field.Placeholder)&&(r.field.Placeholder=o[s]);var c=i(s);e.get(c).success(function(e){a.html(e),t(a.contents())(r);var n=u[s];n&&n(r,a)}).error(function(e){console.log("fieldDirective linker "+e)})};return{template:"<div>{{}}</div>",restrict:"E",scope:{field:"=",data:"=record"},link:d}}]),angularApp.service("ParentsSession",function(){}).controller("FormDirectiveCtrl",["$scope","$http","ParentsSession",function(e,t,r){function a(e,t){return/^0001-01-01T(\d{2}):(\d{2}):(\d{2}).*$/.test(t)?void 0:t}e.$watch("parent",function(){delete e.pager,e.load()}),e.parent=r[e.form.Name],angular.isDefined(e.parent)&&delete r[e.form.Name],e.isDefined=angular.isDefined,e.newRecord=function(){var t=e.form.New;if(angular.isUndefined(t))return{isNew:!0};var r=JSON.parse(JSON.stringify(t,a));return r.isNew=!0,r},e.ops.load&&(e.load=function(){angular.isUndefined(e.pager)&&(e.pager={maxSize:5,totalItems:0,itemsPerPage:20,currentPage:1}),t.get(e.ops.load,{params:{size:e.pager.itemsPerPage,num:e.pager.currentPage,parent:angular.isDefined(e.parent)?e.parent.Id:"null"}}).success(function(t){t=JSON.parse(JSON.stringify(t,a)),e.rs=t.content.list,e.pager.totalItems=t.content.total,e.alert={type:"success",msg:"载入完毕"},e.edit(e.newRecord())})}),e.edit=function(t){e.record=t,e.editing=JSON.parse(JSON.stringify(t))},e.reset=function(){e.editing=JSON.parse(JSON.stringify(e.record))},e.ops.save&&(e.save=function(){t.post(e.ops.save,e.editing).success(function(t){t.error?e.alert={type:"error",msg:t.content}:(e.editing.isNew?(e.rs.push(t.content),e.edit(t.content)):(e.rs.replace(e.record,t.content),e.record=t.content,e.reset()),e.alert={type:"success",msg:"保存成功"})})}),e.ops.remove&&(e.remove=function(){t.post(e.ops.remove,e.editing).success(function(t){t.error?e.alert={type:"error",msg:t.content}:(e.rs.remove(e.record),e.edit(e.newRecord()),e.alert={type:"success",msg:"删除成功"})})}),e.ops.recovery&&(e.recovery=function(){t.put(e.ops.recovery,{}).success(function(t){e.alert=t.error?{type:"error",msg:t.content}:{type:"success",msg:"重建数据库成功，当前所有数据在服务器端已经被删除,点击载入按钮重新加载"}})}),e.ops.migrate&&(e.migrate=function(){t.put(e.ops.migrate,{}).success(function(t){e.alert=t.error?{type:"error",msg:t.content}:{type:"success",msg:"数据库结构更新成功,刷新页面重新加载相应结构"}})})}]).directive("formDirective",function(){return{controller:"FormDirectiveCtrl",templateUrl:"views/directive-templates/form/form.html",restrict:"E",scope:{form:"=formMetas",ops:"="}}}),angularApp.service("FormService",["$http",function(e){this.get=function(t){return e.get(t).then(function(e){return e.data})}}]),angularApp.service("HeaderService",["$location",function(e){return{active:function(t){var r=e.path();return{active:r===t.when||r==="/table/"+t.Name}}}}]);